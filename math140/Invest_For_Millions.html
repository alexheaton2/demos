<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Guided Activity: Modeling Your Path to $1 Million</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Add Chart.js for plotting -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple styling for math-like text */
        .math {
            font-family: 'Times New Roman', Times, serif;
            font-style: italic;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-12">

        <!-- Header Section -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900 tracking-tight">Self-Guided Activity: Modeling Your Path to $1 Million</h1>
        </header>

        <!-- Introduction -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
            <p class="mb-4"><strong class="text-slate-900">Objective:</strong> To analyze a computational model of investment growth, understand its connection to differential equations, and discover a key relationship between a numerical approximation and a true analytic solution.</p>
            <p><strong class="text-slate-900">The Goal:</strong> You want to become a millionaire. Your strategy is to invest a fixed amount of money, <span class="math">m</span> dollars, every single month. We will use a computational model to explore how this investment grows and see how a simple year-by-year simulation compares to the true result predicted by calculus.</p>
        </div>

        <hr class="my-10 border-slate-200">
        
        <!-- Part 0: Assign Roles -->
        <section id="part0" class="mb-10">
            <h2 class="text-3xl font-bold text-slate-900 mb-6">Part 0: Assign Your Roles</h2>
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold text-slate-900 mb-3">First Step: Assign Your Roles</h3>
                <p class="mb-4 text-slate-600">For this activity to run smoothly, each person in your group of 3-4 needs a specific job. Decide who will take on each role. You can switch roles later if you'd like!</p>
                <ol class="list-decimal list-outside space-y-4 ml-5">
                    <li>
                        <strong class="font-semibold text-slate-800">Timer</strong><br>
                        This person sets a timer before each new problem. Everyone works silently and alone until the timer rings. The timer can be set for 1, 2, or 3 minutes, and can be different for each problem based on what the group decides.
                    </li>
                    <li>
                        <strong class="font-semibold text-slate-800">Leader</strong><br>
                        This person (gently) asks a different person to speak first on each problem. Your job is to rotate the first speaker from problem to problem to ensure everyone gets a chance to initiate the discussion.
                    </li>
                    <li>
                        <strong class="font-semibold text-slate-800">Writer</strong><br>
                        This person fills out the group worksheet with key takeaways, strategies, or 'aha' moments. They will be responsible for submitting the completed worksheet at the end of class.
                    </li>
                </ol>
            </div>
        </section>

        <hr class="my-10 border-slate-200">

        <!-- Part 1: Interactive Plot -->
        <section id="part1" class="mb-10">
            <h2 class="text-3xl font-bold text-slate-900 mb-6">Part 1: Interactive Visualization</h2>
            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert">
                <p><strong>Timer,</strong> set a timer for 3 minutes so everyone can play with this visualization individually. After the timer ends, discuss your initial thoughts with the group before moving on to the next section of the worksheet.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md">
                <p class="mb-4 text-slate-600">This interactive plot lets you visualize the three models directly. Unlike the SageMath code, you can enter the total number of years directly instead of calculating it from an age difference. Play around with different values to see how the monthly contribution (<span class="math">m</span>), annual return (<span class="math">k</span>), and time (<span class="math">years</span>) affect your investment growth. Try to get a feel for how much you could actually save each month, and see what that means for your long-term investments.</p>
                
                <!-- Input Controls -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-slate-50 rounded-lg">
                    <div>
                        <label for="k_rate" class="block text-sm font-medium text-slate-700">Annual Return (k)</label>
                        <input type="number" id="k_rate" value="0.07" step="0.01" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="m_monthly" class="block text-sm font-medium text-slate-700">Monthly Savings (m)</label>
                        <input type="number" id="m_monthly" value="250" step="50" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="t_years" class="block text-sm font-medium text-slate-700">Years</label>
                        <input type="number" id="t_years" value="10" step="1" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2">
                    </div>
                </div>

                <!-- Chart Canvas -->
                <div class="w-full">
                    <canvas id="investmentChart"></canvas>
                </div>
            </div>
        </section>

        <hr class="my-10 border-slate-200">
        
        <!-- Part 2: The Models -->
        <section id="part2" class="mb-10">
            <h2 class="text-3xl font-bold text-slate-900 mb-6">Part 2: The Models and Their Solutions</h2>
            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert">
                <p><strong>Timer,</strong> set a brief timer so everyone has a chance to silently read the beginning of the section. When the timer ends, discuss briefly before attempting any questions.</p>
            </div>
            <p class="mb-6">We can describe the growth of your investment using the language of differential equations. Let <span class="math">x(t)</span> be the amount of money at time <span class="math">t</span> (in years).</p>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Model 1 -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-slate-900 mb-3">Model 1: The "Shoebox" Method (Linear Growth)</h3>
                    <p class="mb-4 text-slate-600">If you simply save money without earning interest, the rate of change <span class="math">x' = dx/dt</span> is constant. With a monthly contribution of <span class="math">m</span> dollars, your annual contribution is <span class="math">12m</span> dollars.</p>
                    <ul class="space-y-2">
                        <li><strong>Differential Equation:</strong> <code class="bg-slate-100 p-1 rounded text-sm"><span class="math">x' = 12m</span></code></li>
                        <li><strong>Analytic Solution:</strong> <code class="bg-slate-100 p-1 rounded text-sm"><span class="math">x(t) = 12mt</span></code> (assuming <span class="math">x(0)=0</span>)</li>
                    </ul>
                </div>
                <!-- Model 2 -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-slate-900 mb-3">Model 2: The Investing Method (Exponential Growth)</h3>
                    <p class="mb-4 text-slate-600">If you invest your money, it grows from both your contributions (<span class="math">12m</span>) and from market returns (interest). Investment returns are proportional to the amount you have, <span class="math">x</span>.</p>
                     <ul class="space-y-2">
                        <li><strong>Differential Equation:</strong> <code class="bg-slate-100 p-1 rounded text-sm"><span class="math">x' = kx + 12m</span></code></li>
                        <li class="flex items-start"><strong>Analytic Solution:</strong> <code class="bg-slate-100 p-2 rounded text-sm block mt-1"><span class="math">x(t) = (12m/k)(e<sup>kt</sup> - 1)</span></code></li>
                    </ul>
                </div>
            </div>
            
            <div class="mt-8">
                <p class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">In a differential equation like <span class="math">x’ = 12m</span>, where <span class="math">m</span> is a fixed constant number, the “solution” we seek is a function <span class="math">x(t)</span> that satisfies <span class="math">dx/dt = 12m</span>. For example, if <span class="math">x(t) = t<sup>2</sup></span>, then <span class="math">dx/dt = 2t</span>, which is not equal to <span class="math">12m</span>, hence <span class="math">x(t) = t<sup>2</sup></span> does not satisfy the differential equation. In algebraic equations like <span class="math">2x + 5 = 1</span>, the solution we seek is a number like <span class="math">x = -2</span>. Differential equations are harder because the solution is an entire function! …not just a number.</p>
                
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-slate-900 mb-3">Derivative Warm-Up Questions</h3>
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4" role="alert">
                        <p><strong>Timer,</strong> set a brief timer so everyone can try the question alone first. Then discuss answers when timer ends.</p>
                    </div>
                    <ol class="list-decimal list-inside space-y-4 text-slate-600">
                        <li>Consider the equation <span class="math">x’ = 17</span>. Can you find a solution <span class="math">x(t) = ?</span></li>
                        <li>Consider the equation <span class="math">x’ = 17t</span>. Can you find a solution <span class="math">x(t) = ?</span></li>
                        <li>Consider the equation <span class="math">x’ = kt</span>, where <span class="math">k</span> is a fixed number. Can you find a solution <span class="math">x(t) = ?</span></li>
                        <li>Consider the equation <span class="math">x’ = kx + 12m</span> where <span class="math">k</span> and <span class="math">m</span> are fixed numbers. Carefully and explicitly verify that <span class="math">x(t) = (12m / k)( e<sup>kt</sup> - 1 )</span> solves the equation. Plug into both sides, simplify, and verify that you get the same results on both sides of the equation. Write out each step carefully.</li>
                    </ol>
                </div>
            </div>

            <p class="mt-8 text-sm text-slate-600 bg-slate-100 p-4 rounded-lg">For our models, we will use an annual growth rate of <span class="math">k = 0.07</span>, since this is approximately the annual growth of the US stock market historically, already adjusted for inflation. Look this up online for more information, because although this is the standard "conservative" estimate, it's still just an estimate or assumption and could be wrong.</p>
        </section>

        <hr class="my-10 border-slate-200">

        <!-- Part 3: The Simulation -->
        <section id="part3" class="mb-10">
            <h2 class="text-3xl font-bold text-slate-900 mb-6">Part 3: The SageMath Simulation</h2>
            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert">
                <p><strong>Timer,</strong> set a brief timer so everyone has a chance to silently read the beginning of the section. When the timer ends, discuss briefly before attempting any questions.</p>
            </div>
            <p class="mb-6">Instead of building a simulation from scratch, you will use a pre-written Python code snippet. We will run this in SageMathCell, a free online tool that lets you execute code without installing any software.</p>
            
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold text-slate-900 mb-3">Your Task:</h3>
                <ol class="list-decimal list-inside space-y-3">
                    <li>
                        Click this link to open the pre-loaded SageMathCell environment:
                        <a href="https://sagecell.sagemath.org/?z=eJx9U0Fu2zAQvAvQHwb2xU7i1AnQBihg9Jx7gB4LWlpZTChSXZK21FO_0e_1JV1Kjuw6aQXDoNbDmdnZ9Qs2WN-uHzCHtpVRQTuLFVT5HH2gEsraqAyYQmSbZ43AP64FXDpjFHu0xGicDXWedYlKfvJBccBBhxo_iN0rNM_yTGg0U0M2fFM7EvynhzwrIvOpcr_Os54S9QYX8BXOoXOoKoh6qLVHo2yP8doNCte0ikl8lWQG3TmeEko-oSYEjgTvTByardg1KJQpookCnuobdLgCdS0WeJHTyL7ENe7ur9Dgw1BdvINY4W75VnUGXzvauk5Og7MxIuskeOmDfMgzo61wDNKvMkfaMz7jXAuvmyjTopF7x-4gXAkp6ttevtI5XXkM-P3zl4eLLMI2NsRauoVqW3adbsaJz_Kscoxn8QJWVuJdTO18zjPI0_1l63rouEtTKEtJ3AbW2yE4Pybq1V7bXRqHsuVYOvWZZy3Lm4jM8FihdxFp39DGkF6GlaI-mVFTarQn7sddE9J05aCNQa32KdsbsIsitMAxw6WUZtOa3sp5eaGqrWy4KgcqbfdiTLJU4aj9P7njc67aXQhK20XhuJQMENyQ_r-yf-PtSSaqrDJ90MVpT4UljbrUVUXpT6CFiL7HkaNlKnURPN7zNlFcZvK11kUNaTftqLhlKgK-JDt_AHSjS4E=&lang=sage&interacts=eJyLjgUAARUAuQ==" target="_blank" class="font-semibold text-blue-600 hover:text-blue-800 transition-colors">Open SageMathCell Activity</a>.
                    </li>
                    <li>If the link doesn't work, copy the code below and paste it into the editor at <a href="https://sagecell.sagemath.org/" target="_blank" class="font-semibold text-blue-600 hover:text-blue-800 transition-colors">sagecell.sagemath.org</a>.</li>
                    <li>Click the "Evaluate" button to run the code and see the output.</li>
                </ol>
            </div>
            
            <div class="mt-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-2">The Code:</h3>
                <pre class="bg-slate-800 text-white p-4 rounded-lg shadow-inner text-sm overflow-x-auto"><code class="language-python"><span style="color: #6ee7b7;"># inflation-adjusted annual return</span>
k = <span style="color: #f0abfc;">0.07</span> 
<span style="color: #6ee7b7;"># dollars per month</span>
m = <span style="color: #f0abfc;">250</span> 
<span style="color: #6ee7b7;"># start with zero dollars</span>
x = <span style="color: #f0abfc;">0</span> 

retirement_age = <span style="color: #f0abfc;">67</span>
current_age = <span style="color: #f0abfc;">20</span>
<span style="color: #6ee7b7;"># after this many years, compare models</span>
years = retirement_age - current_age 

<span style="color: #6ee7b7;"># This is the true solution from calculus</span>
solution = x*exp(k * years) + 12*m/k * (exp(k * years) - 1)

<span style="color: #6ee7b7;"># This is the "shoebox" model with no interest</span>
linear = x + 12*m * years

<span style="color: #6ee7b7;"># This loop simulates the growth year-by-year</span>
<span style="color: #6ee7b7;"># It's our "numerical approximation"</span>
<span style="color: #d8b4fe;">for</span> j <span style="color: #d8b4fe;">in</span> range(years):
    x = x + 12*m + k*x <span style="color: #6ee7b7;"># add contributions from savings, and from interest</span>

<span style="color: #d8b4fe;">print</span>(<span style="color: #a5b4fc;">"If you just put your money in a shoebox every month, you will have "</span>, round(linear), <span style="color: #a5b4fc;">" dollars."</span>)
<span style="color: #d8b4fe;">print</span>(<span style="color: #a5b4fc;">"If instead you invest that money every month, you will have      "</span>, round(x), <span style="color: #a5b4fc;">" dollars, according to our numerical approximation."</span>)
<span style="color: #d8b4fe;">print</span>(<span style="color: #a5b4fc;">"The analytic solution to the differential equation predicts      "</span>, round(solution), <span style="color: #a5b4fc;">" dollars. Which one is correct?"</span>)
</code></pre>
            </div>
        </section>

        <hr class="my-10 border-slate-200">

        <!-- Part 4: Guided Investigation -->
        <section id="part4" class="mb-10">
            <h2 class="text-3xl font-bold text-slate-900 mb-6">Part 4: Guided Investigation</h2>
            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert">
                <p><strong>Timer,</strong> set a brief timer so everyone has a chance to silently read the beginning of the section. When the timer ends, discuss briefly before attempting any questions.</p>
            </div>
            <p class="mb-6">Your goal is to understand what this code is doing and why its results are different. Answer the following questions.</p>
            
            <div class="space-y-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-slate-900 mb-3">Question 1: Understanding the Code's Logic</h3>
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4" role="alert">
                        <p><strong>Timer,</strong> set a brief timer so everyone can try the question alone first. Then discuss answers when timer ends.</p>
                    </div>
                    <ul class="list-disc list-inside space-y-2 text-slate-600">
                        <li>Run the code with the initial values (m=250). You will see three different final amounts. Which one is the largest? Which is the smallest?</li>
                        <li>Look at the <code>for</code> loop. The line <code>x = x + 12*m + k*x</code> is a step-by-step (numerical) simulation. In your own words, what calculation is it performing each year?</li>
                        <li>The line <code>solution = ...</code> calculates the result of the analytic solution for Model 2. Why do you think its result is different from the one calculated by the <code>for</code> loop? Which one do you trust more, and why?</li>
                    </ul>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-slate-900 mb-3">Question 2: The Underestimation Puzzle</h3>
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4" role="alert">
                        <p><strong>Timer,</strong> set a brief timer so everyone can try the question alone first. Then discuss answers when timer ends.</p>
                    </div>
                    <p class="mb-4 text-slate-600">You should have noticed that the numerical approximation from the <code>for</code> loop is <em>less than</em> the true value from the analytic solution. Let's figure out why. The line <code>x = x + 12*m + k*x</code> calculates the interest for an entire year (<code>k*x</code>) based on the amount of money you had at the <strong>start</strong> of that year.</p>
                    <ul class="list-disc list-inside space-y-2 text-slate-600">
                        <li><strong>Hint:</strong> In reality, does the amount of money in your account stay fixed for the whole year, or does it increase as you make monthly contributions and earn interest?</li>
                        <li>Therefore, when our code calculates the interest for the year, is it using a principal amount (<code>x</code>) that is slightly too high or slightly too low compared to what it should be for most of the year?</li>
                        <li>Based on your answer, explain why our <code>for</code> loop method will always <strong>underestimate</strong> the true final value.</li>
                    </ul>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-slate-900 mb-3">Question 3: The Calculus Connection (Concavity)</h3>
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4" role="alert">
                        <p><strong>Timer,</strong> set a brief timer so everyone can try the question alone first. Then discuss answers when timer ends.</p>
                    </div>
                    <p class="mb-4 text-slate-600">The graph of the true solution, <span class="math">x(t) = (12m/k)(e<sup>kt</sup> - 1)</span>, is <strong>concave up</strong>, meaning it constantly curves upwards. You can test this by taking <strong>two derivatives</strong> and checking the result is always positive. Our numerical method is a simplified version of Euler's Method, which uses the slope at the beginning of an interval (the rate of change <span class="math">x'</span>) to take a linear step forward.</p>
                    <ul class="list-disc list-inside space-y-2 text-slate-600">
                        <li>Imagine drawing a tangent line to a curve that is concave up. Besides the point of tangency, is the tangent line above or below the curve? Draw it!</li>
                        <li>How does this picture of a tangent line and a concave up curve explain why our linear, step-by-step approximation consistently falls short of the true, curving solution?</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <hr class="my-10 border-slate-200">

        <!-- Part 5: Your Quest -->
        <section id="part5" class="mb-10">
            <h2 class="text-3xl font-bold text-slate-900 mb-6">Part 5: Your Quest for $1 Million</h2>
             <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert">
                <p><strong>Timer,</strong> set a brief timer so everyone has a chance to silently read the beginning of the section. When the timer ends, discuss briefly before attempting any questions.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md">
                <p class="mb-4">Now, use the code to plan your retirement. Modify the variables <span class="math">m</span> and <code>years</code> to find what it takes to reach your goal. For this part, trust the <strong>analytic solution</strong> as the correct value.</p>
                 <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4" role="alert">
                    <p><strong>Timer,</strong> set a brief timer so everyone can try the question alone first. Then discuss answers when timer ends.</p>
                </div>
                <ol class="list-decimal list-inside space-y-3">
                    <li><strong>Find the Contribution:</strong> Keep <code>years</code> at 47 (age 67 - age 20). What value do you need to set for the monthly contribution <span class="math">m</span> to make the analytic <code>solution</code> be approximately <strong>$1,000,000</strong>?</li>
                    <li><strong>Find the Time:</strong> Set the monthly contribution <span class="math">m</span> to <strong>$500</strong>. What is the smallest integer value for <code>years</code> that makes the analytic <code>solution</code> exceed <strong>$1,000,000</strong>?</li>
                </ol>
            </div>
        </section>

    </div>

    <script>
        // Get references to the HTML elements
        const ctx = document.getElementById('investmentChart').getContext('2d');
        const kInput = document.getElementById('k_rate');
        const mInput = document.getElementById('m_monthly');
        const yearsInput = document.getElementById('t_years');

        let investmentChart; // To hold the chart instance

        // Function to calculate all data points and update the chart
        function updatePlot() {
            // Get values from inputs, ensuring they are numbers
            const k = parseFloat(kInput.value) || 0;
            const m = parseFloat(mInput.value) || 0;
            const years = parseInt(yearsInput.value) || 0;

            // --- Data Calculation ---
            const labels = Array.from({ length: years + 1 }, (_, i) => i); // Years 0, 1, 2, ...
            
            // 1. Analytic Solution Data
            const analyticData = labels.map(t => {
                if (k === 0) return 12 * m * t; // Avoid division by zero
                return (12 * m / k) * (Math.exp(k * t) - 1);
            });

            // 2. Numerical Approximation Data
            const numericalData = [0];
            let x_numerical = 0;
            for (let i = 0; i < years; i++) {
                x_numerical = x_numerical + 12 * m + k * x_numerical;
                numericalData.push(x_numerical);
            }

            // 3. Shoebox (Linear) Model Data
            const linearData = labels.map(t => 12 * m * t);

            // --- Chart Configuration ---
            const data = {
                labels: labels,
                datasets: [
                    {
                        label: 'Analytic Solution (True Value)',
                        data: analyticData,
                        borderColor: 'rgb(34, 197, 94)', // green-500
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        tension: 0.1,
                        fill: true,
                    },
                    {
                        label: 'Numerical Approximation',
                        data: numericalData,
                        borderColor: 'rgb(234, 179, 8)', // yellow-500
                        backgroundColor: 'rgba(234, 179, 8, 0.1)',
                        stepped: true, // Show the step-wise nature
                    },
                    {
                        label: 'Shoebox Method (Linear)',
                        data: linearData,
                        borderColor: 'rgb(239, 68, 68)', // red-500
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    }
                ]
            };

            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Investment Growth Over Time'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(context.parsed.y);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Years'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Total Savings ($)'
                            },
                            ticks: {
                                callback: function(value, index, values) {
                                    return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', notation: 'compact' }).format(value);
                                }
                            }
                        }
                    }
                }
            };

            // Destroy the old chart instance if it exists before creating a new one
            if (investmentChart) {
                investmentChart.destroy();
            }

            // Create the new chart
            investmentChart = new Chart(ctx, config);
        }

        // --- Event Listeners ---
        // Add listeners to update the plot whenever an input value changes
        kInput.addEventListener('input', updatePlot);
        mInput.addEventListener('input', updatePlot);
        yearsInput.addEventListener('input', updatePlot);

        // Initial plot on page load
        window.onload = updatePlot;

    </script>
</body>
</html>

